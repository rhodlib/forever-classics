---
const cocktails = [
  {
    name: 'Negroni',
    description: 'Gin, Campari y vermut rojo.',
    image: '/images/negroni.webp',
    recipe: '30ml Gin, 30ml Campari, 30ml Vermut rojo.',
    preparation: 'Servir en vaso bajo con hielo; revolver suavemente y decorar con rodaja de naranja.',
    history: 'Creado en 1919 en Florencia a pedido del conde Camillo Negroni como versi√≥n m√°s fuerte del Americano.'
  },
  {
    name: 'Martini',
    description: 'Gin y vermut seco.',
    image: '/images/martini.webp',
    recipe: '60ml Gin, 10ml Vermut seco.',
    preparation: 'Revolver con hielo, colar en copa de c√≥ctel y decorar con aceituna o twist de lim√≥n.',
    history: 'Cl√°sico s√≠mbolo de elegancia, con varias teor√≠as sobre su origen en los 1800s, tal vez derivado del ‚ÄúMartinez‚Äù.'
  },
  {
    name: 'Aviation',
    description: 'Gin, maraschino y lim√≥n (con violeta opcional).',
    image: '/images/aviation.webp',
    recipe: '45ml Gin, 15ml Maraschino, 15ml jugo de lim√≥n, 1 bar spoon Cr√®me de violette (opcional).',
    preparation: 'Agitar con hielo y colar en copa fr√≠a.',
    history: 'Creado por Hugo Ensslin en NY a principios del siglo XX; receta publicada en 1916.'
  },
  {
    name: 'Clover Club',
    description: 'Gin, frambuesa, lim√≥n y clara de huevo.',
    image: '/images/clover-club.webp',
    recipe: '45ml Gin, 15ml jarabe de frambuesa, 15ml lim√≥n, 30ml clara de huevo.',
    preparation: 'Agitar en seco, luego con hielo y colar en copa.',
    history: 'Popular en los clubs de Philadelphia, siglo XIX; vuelve fuerte como cl√°sico forgotten.'
  },
  {
    name: 'Tom Collins',
    description: 'Gin, lim√≥n, az√∫car y soda.',
    image: '/images/tom-collins.webp',
    recipe: '45ml Gin, 25ml jugo de lim√≥n, 15ml jarabe simple, completar con soda.',
    preparation: 'Servir en vaso largo con hielo; revolver suavemente y decorar con rodaja de lim√≥n.',
    history: 'Pertenece a los ‚Äúcollins‚Äù; aparece en manuales desde mediados del siglo XIX.'
  },
  {
    name: 'Ramos Gin Fizz',
    description: 'Gin, c√≠tricos, crema, clara, agua de azahar y soda.',
    image: '/images/ramos-gin-fizz.webp',
    recipe: '45ml Gin, 15ml lim√≥n, 15ml lima, 30ml crema, 15ml jarabe simple, 1 clara, 3 gotas agua de azahar, soda.',
    preparation: 'Agitar sin hielo, luego con hielo, colar en vaso largo y completar con soda.',
    history: 'Creado por Henry C. Ramos en Nueva Orleans en 1888.'
  },
  {
    name: 'Tuxedo',
    description: 'Gin, dry vermut, maraschino, absenta y bitters.',
    image: '/images/tuxedo.webp',
    recipe: '30ml Gin (Old Tom), 30ml dry vermut, ¬Ω barspoon maraschino, ¬º absenta, 3 dashes bitters.',
    preparation: 'Revolver con hielo y colar en copa fr√≠a; decorar con cereza y twist.',
    history: 'Originado en 1880s en el Tuxedo Club (NY); variante elegante del martini.'
  },
  {
    name: 'Whiskey Sour',
    description: 'Whiskey, lim√≥n y az√∫car.',
    image: '/images/whiskey-sour.webp',
    recipe: '45ml whiskey, 25ml jugo de lim√≥n, 15ml jarabe simple.',
    preparation: 'Agitar con hielo y colar en vaso bajo. Opcional: clara de huevo y amargo en la espuma.',
    history: 'Se remonta al siglo XIX. Parte de la familia ‚Äúsour‚Äù, es otro pilar de la cocteler√≠a cl√°sica.'
  },
  {
    name: 'French 75',
    description: 'Gin, champ√°n, lim√≥n y az√∫car.',
    image: '/images/french-75.webp',
    recipe: '30ml Gin, 15ml jugo de lim√≥n, 10ml jarabe simple, completar con champ√°n.',
    preparation: 'Agitar gin, lim√≥n y jarabe con hielo, colar en flute y terminar con champ√°n.',
    history: 'Nombrado por un ca√±√≥n franc√©s de la WWI; popularizado en NY en 1920s.'
  },
  {
    name: 'Caipirinha',
    description: 'Cacha√ßa, lima y az√∫car.',
    image: '/images/caipirinha.webp',
    recipe: '60ml cacha√ßa, 1 lima en cuartos, 4 cdtas az√∫car.',
    preparation: 'Macerar lima con az√∫car, agregar hielo y cacha√ßa, remover.',
    history: 'Originaria de Brasil, declarada patrimonio cultural en 2003.'
  },
  {
    name: 'Manhattan',
    description: 'Whiskey, vermut rojo y angostura.',
    image: '/images/manhattan.jpg',
    recipe: '50ml Whiskey, 20ml Vermut rojo, 2 dashes Angostura.',
    preparation: 'Revolver con hielo y colar en una copa fr√≠a. Decorar con una cereza.',
    history: 'Nacido en el Manhattan Club de Nueva York en el siglo XIX. Cl√°sico del c√≥ctel moderno.'
  },
  {
    name: 'Daiquiri',
    description: 'Ron, lima y az√∫car.',
    image: '/images/daiquiri.jpeg',
    recipe: '45ml Ron blanco, 25ml jugo de lima, 15ml az√∫car l√≠quida.',
    preparation: 'Agitar todos los ingredientes con hielo y servir colado en una copa fr√≠a.',
    history: 'Creado en Cuba a finales del siglo XIX, nombrado por una mina cercana a Santiago de Cuba.'
  },
  {
    name: 'Old Fashioned',
    description: 'Whiskey, bitter y az√∫car.',
    image: '/images/old-fashioned.webp',
    recipe: '60ml Whiskey, 1 cubo de az√∫car, 2 dashes de angostura.',
    preparation: 'Colocar el az√∫car en el vaso, agregar angostura, disolver con unas gotas de agua y luego agregar el whiskey y hielo.',
    history: 'Uno de los c√≥cteles m√°s antiguos, originado a principios del siglo XIX en EE.UU.'
  },
  {
    name: 'Margarita',
    description: 'Tequila, triple sec y jugo de lima.',
    image: '/images/margarita.jpg',
    recipe: '50ml Tequila, 25ml Triple sec, 25ml jugo de lima.',
    preparation: 'Agitar con hielo y servir en copa con borde de sal. Decorar con rodaja de lima.',
    history: 'Existen muchas teor√≠as sobre su origen, pero se populariz√≥ en M√©xico y el sur de EE.UU. en los a√±os 30-40.'
  }
];

const loopedCocktails = [
    ...cocktails,
    ...cocktails,
    ...cocktails,
    ...cocktails,
    ...cocktails,
];
---

<!-- T√≠tulo -->
<header class="text-center py-4 z-10">
    <h1 class="text-4xl font-extrabold neon drop-shadow-md">
        ForeverClassics üç∏
    </h1>
</header>

<!-- Carrusel -->
<div
    id="carousel"
    class="flex justify-center items-center overflow-x-scroll snap-x snap-mandatory scroll-smooth no-scrollbar gap-4 w-full px-4 sm:px-6 py-6 flex-1"
>
    {
        loopedCocktails.map((c, i) => (
        <div class="carousel-item snap-center shrink-0 w-[60vw] sm:w-[45vw] lg:w-[28vw] transition-transform duration-300 ease-in-out" data-index={i}>
  <div class="flip-card bg-[#1c1c2b] rounded-2xl shadow-xl overflow-hidden h-[60vh] sm:h-[65vh] lg:h-[70vh]">
    <div class="flip-inner w-full h-full">
      <div class="flip-front absolute w-full h-full top-0 left-0 flex flex-col">
        <img src={c.image} alt={c.name} class="w-full h-1/2 object-cover" />
        <div class="p-6 flex flex-col justify-center items-center h-1/2">
          <h2 class="text-2xl font-bold text-white mb-2">{c.name}</h2>
          <p class="text-gray-300 text-center mb-4">{c.description}</p>
          <button class="flip-button px-4 py-2 bg-white text-black rounded-md text-sm">Ver receta</button>
        </div>
      </div>
      <div class="flip-back absolute w-full h-full top-0 left-0 bg-[#1c1c2b] p-6 rounded-2xl text-white flex flex-col justify-center items-center text-center overflow-y-auto">
        <h2 class="text-2xl font-bold mb-2">{c.name}</h2>
        <p class="text-sm italic text-gray-400 mb-4">{c.history}</p>
        <h3 class="text-xl font-bold mb-2">Receta</h3>
        <p class="mb-2">{c.recipe}</p>
        <h4 class="text-lg font-semibold mb-1">Preparaci√≥n</h4>
        <p class="mb-2">{c.preparation}</p>
        <button class="flip-button px-4 py-2 mt-4 bg-white text-black rounded-md text-sm">Volver</button>
      </div>
    </div>
  </div>
</div>

        ))
    }
</div>

<style>
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }
    .carousel-item[data-active="true"] {
        transform: scale(1.05);
    }
    .carousel-item[data-active="false"] {
        transform: scale(0.95);
        opacity: 0.6;
    }
    .cursor-grabbing {
        cursor: grabbing;
        user-select: none;
    }
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: scale(0.95);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    .animate-fade-in {
        animation: fade-in 0.25s ease-out;
    }
    .neon {
        color: #fff;
        text-shadow:
            0 0 5px #fff,
            0 0 10px #ff00cc,
            0 0 20px #ff00cc,
            0 0 40px #ff00cc;
    }
    .flip-card {
  position: relative;
  perspective: 1000px;
}
.flip-inner {
  width: 100%;
  height: 100%;
  transition: transform 0.8s;
  transform-style: preserve-3d;
  position: relative;
}
.flip-card.flipped .flip-inner {
  transform: rotateY(180deg);
}
.flip-front,
.flip-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 1rem;
  overflow: hidden;
}
.flip-front {
  z-index: 2;
}
.flip-back {
  transform: rotateY(180deg);
  z-index: 1;
}

</style>

<script type="module" client:load>
    const container = document.getElementById("carousel");
    const items = container.querySelectorAll(".carousel-item");
    const itemWidth = items[0].offsetWidth + 16;
    const realItemCount = items.length - 4;
    container.scrollLeft = itemWidth * 2;

    const updateActive = () => {
        const scrollCenter = container.scrollLeft + container.offsetWidth / 2;
        items.forEach((item) => {
            const box = item.getBoundingClientRect();
            const boxCenter = box.left + box.width / 2;
            const diff = Math.abs(container.offsetWidth / 2 - boxCenter);
            const isCenter = diff < box.width / 2;
            item.dataset.active = isCenter ? "true" : "false";
        });
        if (container.scrollLeft <= itemWidth) {
            container.scrollLeft = itemWidth * (realItemCount + 1);
        } else if (container.scrollLeft >= itemWidth * (realItemCount + 2)) {
            container.scrollLeft = itemWidth * 2;
        }
    };

    container.addEventListener("scroll", () => {
        requestAnimationFrame(updateActive);
    });
    updateActive();

    let isDragging = false;
    let startX;
    let scrollLeftStart;

    container.addEventListener("mousedown", (e) => {
        isDragging = true;
        container.classList.add("cursor-grabbing");
        startX = e.pageX - container.offsetLeft;
        scrollLeftStart = container.scrollLeft;
    });
    container.addEventListener("mouseleave", () => {
        isDragging = false;
        container.classList.remove("cursor-grabbing");
    });
    container.addEventListener("mouseup", () => {
        isDragging = false;
        container.classList.remove("cursor-grabbing");
    });
    container.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const x = e.pageX - container.offsetLeft;
        const walk = (x - startX) * 1.2;
        container.scrollLeft = scrollLeftStart - walk;
    });

    // Agregar funcionalidad al bot√≥n "Ver receta"
    document.querySelectorAll(".flip-button").forEach((button) => {
        button.addEventListener("click", (e) => {
            const flipCard = e.target.closest(".flip-card");
            flipCard.classList.toggle("flipped");
        });
    });
</script>

<footer class="text-center text-gray-500 text-sm py-6">
    &copy; 2025 &middot; Creado por <a
        href="https://rhodlib.com"
        class="underline hover:text-white"
        target="_blank">rhodlib</a
    >
</footer>
